package org.suntao.easyorm.map;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.List;

import org.suntao.easyorm.executor.defaults.SimpleExecutor;
import org.suntao.easyorm.session.SqlSession;
import org.suntao.easyorm.session.defaults.DefaultSqlSessionBuilder;
import org.suntao.easyorm.xmlparse.DatabaseConfig;
import org.suntao.easyorm.xmlparse.XmlParse;

public class mapTest {
	static String sqlStr = "select * from courseinfo";

	@SuppressWarnings("unchecked")
	public static void main(String[] args) {
		SqlSession session = new DefaultSqlSessionBuilder(
				"src/test/resources/xmltest.xml").openSession();
		try {
			Connection conn = session.getConnection();
			Statement sm = conn.createStatement();
			ResultSet rs = sm.executeQuery(sqlStr);
			rs.next();
			courseinfo course = new SimpleMapping().getModel(new ResultMap(
					courseinfo.class, null), rs);
			System.out.println(course.getStrInfo());
			List<courseinfo> list = new SimpleExecutor(conn,
					new SimpleMapping()).selectList(new ResultMap(
					courseinfo.class, null), sqlStr);
			for (courseinfo c : list) {
				System.out.println(c.getStrInfo());
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

}

/**
 * 测试类
 * 
 * @author suntao
 *
 */
class courseinfo {
	private int courseid;
	private String course;
	private float score;
	private int classhour;
	private int teacherid;

	public int getCourseid() {
		return courseid;
	}

	public void setCourseid(int courseid) {
		this.courseid = courseid;
	}

	public String getCourse() {
		return course;
	}

	public void setCourse(String course) {
		this.course = course;
	}

	public float getScore() {
		return score;
	}

	public void setScore(float score) {
		this.score = score;
	}

	public int getClasshour() {
		return classhour;
	}

	public void setClasshour(int classhour) {
		this.classhour = classhour;
	}

	public int getTeacherid() {
		return teacherid;
	}

	public void setTeacherid(int teacherid) {
		this.teacherid = teacherid;
	}

	public String getStrInfo() {
		return "" + courseid + course + score + classhour + teacherid;
	}
}
